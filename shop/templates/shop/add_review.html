{% extends "shop/base.html" %}
{% block title %}评价订单 #{{ order.pk }}{% endblock %}

{% block content %}
  <h1>评价订单 #{{ order.pk }}</h1>
  <p>请为您的订单打分并留下评论。</p>

  <form method="post">
    {% csrf_token %}
    <div class="mb-3">
      <label class="form-label">评分:</label>
      <div class="rating-stars">
        {% for i in "12345"|make_list %}
          <input type="radio" id="star{{ i }}" name="rating" value="{{ i }}" {% if form.rating.value == i %}checked{% endif %} class="d-none"/>
          <label for="star{{ i }}" class="star-label"><i class="bi bi-star-fill"></i></label>
        {% endfor %}
      </div>
      {% if form.rating.errors %}
        <div class="text-danger">{{ form.rating.errors }}</div>
      {% endif %}
    </div>
    <div class="mb-3">
      <label for="id_comment" class="form-label">评论:</label>
      {{ form.comment }}
      {% if form.comment.errors %}
        <div class="text-danger">{{ form.comment.errors }}</div>
      {% endif %}
    </div>
    <button type="submit" class="btn btn-primary">提交评价</button>
    <a href="{% url 'shop:order_detail' order.pk %}" class="btn btn-secondary">取消</a>
  </form>

  <style>
    .rating-stars .star-label {
      font-size: 2rem;
      color: #ccc;
      cursor: pointer;
      transition: color 0.2s;
    }
    .rating-stars .star-label:hover,
    .rating-stars .star-label:hover ~ .star-label,
    .rating-stars input:checked ~ .star-label {
      color: #ffc107; /* Bootstrap yellow */
    }
    .rating-stars input:checked + .star-label {
        color: #ffc107;
    }
  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
{% endblock %}
